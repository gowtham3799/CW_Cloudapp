sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/UIComponent"],function(t,n,e,a){"use strict";return t.extend("viapp.controller.PaymentDetails",{onInit:function(){this._oRouter=sap.ui.core.UIComponent.getRouterFor(this);this._oRouter.attachRouteMatched(this.handleRouteMatched,this)},handleRouteMatched:function(t){},onPressNavtoPaymentapp:function(){sap.m.MessageToast.show("Navigating to payment app");var t="39921047";var n="100";var e={Saleorder:"",Invoice:"",MOPType:"",CardNo:"",Authcode:"",TransactionMessage:""};var a=JSON.stringify(e);let o="com.sap.mobile.start://navigation?resolve-type=ibn#CW-display?sap-ui-app-id-hint=saas_approuter_viapp";let i=encodeURIComponent(o);var r={trxnType:"SALE",amount:n,mode:"card",trxnID:t};var d=JSON.stringify(r);var s=encodeURIComponent(d);console.log(i);var p="adnoc://sapmetapay.com/card?data="+s+"&returnUrl="+i;window.location.href=p},ongetSOdetails:function(){var t=this.getView().getModel("oGlobalModel").getProperty("/Saleorder");var a=this.getView().getModel("oGlobalModel").getProperty("/Authcode");this.getView().getModel("CarwashService").read("/Payment",{filters:[new n("ORDERNUM",e.EQ,t)],urlParameters:{$expand:"ITEMS"},success:function(t,n){var e="";var o=t.results[0].ITEMS.results;for(var i=0;i<o.length;i++){if(o[i].MOP_TYPE==="CARD"){o[i].AUTH_CODE=a;e=o[i]}}if(e){this.saveDetails(e)}}.bind(this),error:function(t){MessageBox.error(t.message)}.bind(this)})},saveDetails:function(t){var n={ID:t.ID,PARENT_KEY_ID:t.PARENT_KEY_ID,MOP_COUNTER:t.MOP_COUNTER,AMOUNT:t.AMOUNT,CURRENCY:t.CURRENCY,MOP_TYPE:t.MOP_TYPE,AUTH_CODE:t.AUTH_CODE};var e=this.getView().getModel("CarwashService");var a="";a=e.createKey("/PaymentItem",{ID:t.ID});e.sDefaultUpdateMethod=sap.ui.model.odata.UpdateMethod.Put;e.update(a,n,{success:function(t,n){if(t.ID){sap.m.MessageToast.show("Payment Details Updated successfully");this.onRemoveKeyParameter()}}.bind(this),error:function(t){MessageBox.error(t.message)}.bind(this)})},removeKeyParameter:function(){var t="com.sap.mobile.start://navigation?resolve-type=ibn#CW-display?sap-ui-app-id-hint=saas_approuter_viapp";window.history.replaceState({},document.title,t);alert("Back to Home from Payment");var n=a.getRouterFor(this);n.navTo("Home",{},true)},onRemoveKeyParameter:function(){var t=a.getRouterFor(this);t.navTo("home",true)},onnewprint:function(){const t="892 - Industrial Area, Near 2Nd Signal - Musaffah";const n="2024112050160";var e=this.getView().getModel("oGlobalModel").getData();this.Lineitems=[];var a=e.ItemARR;var o=e.MOPItems;var i=e.MainPlant;var r=e.PlateNo;var d=e.PlateCode;var s=e.Kind;var p=e.Source;var l=e.SOnumber;var c=e.INVOICENo;var h=new Date;var m=new Date;var v=sap.ui.core.format.DateFormat.getDateInstance({pattern:"dd/MM/yyyy"});var u=sap.ui.core.format.DateFormat.getTimeInstance({pattern:"HH:mm:ss"});h=v.format(h);m=u.format(m);var M=[];for(var g=0;g<a.length;g++){var y=parseFloat(a[g].NETPRICE)+parseFloat(a[g].NETPRICE)*.05;var D={Name:a[g].MATERIALDESC,Qty:1,Price:a[g].NETPRICE,Total:parseFloat(y).toFixed(2)};M.push(D)}const b=M.reduce((t,n)=>t+n.Total,0);var A=parseFloat(b).toFixed(2);var I=parseFloat(A)*.05;I=parseFloat(I).toFixed(2);const x=`\n        <!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Invoice</title>\n    <style>\n        body {\n            font-family: Arial, sans-serif;\n            font-size: 20px;\n            margin: 0;\n            padding: 0;\n            background: #f4f4f4;\n        }\n\n        .invoice-container {\n            width: 300px; /* Set width suitable for receipt printers */\n            margin: auto;\n            background: #fff;\n            padding: 10px;\n            border: 1px solid #ddd;\n        }\n\n        .invoice-header {\n            text-align: center;\n            border-bottom: 1px dashed #ddd;\n            padding-bottom: 10px;\n            margin-bottom: 10px;\n        }\n\n        .invoice-header img {\n            max-width: 100px;\n            margin-bottom: 5px;\n        }\n\n        .invoice-header h2 {\n            font-size: 24px;\n            margin: 0;\n        }\n\n        .invoice-header p {\n            margin: 0;\n            font-size: 18px;\n            color: #555;\n        }\n\n        .invoice-details {\n            margin-bottom: 10px;\n             margin-Top: 10px;\n            border-Top: 1px solid #ddd;\n            /*border-bottom: 1px solid #ddd;*/\n            \n        }\n\n        .invoice-details p {\n            margin: 5px 0;\n            font-size: 18px;\n        }\n\n        .invoice-items {\n            width: 100%;\n            border-collapse: collapse;\n            margin-bottom: 10px;\n        }\n\n        .invoice-items th, .invoice-items td {\n            text-align: left;\n            font-size: 18px;\n            padding: 5px;\n        }\n\n        .invoice-items th {\n            background: #f4f4f4;\n            border-bottom: 1px solid #ddd;\n        }\n\n        .invoice-items td {\n            border-bottom: 1px dashed #ddd;\n        }\n\n        .invoice-totals {\n            text-align: right;\n            font-size: 20px;\n            border-bottom: 1px dashed #ddd;\n        }\n\n        .invoice-totals p {\n            margin: 2px 0;\n        }\n\t\t.total {\n              font-weight: bold;\n         }\n\n        .invoice-footer {\n            text-align: Center;\n            /*border-top: 1px dashed #ddd;*/\n            /*padding-top: 1px;*/\n            /*margin-top: 10px;*/\n            font-size: 18px;\n        }\n        \n        .invoice-Number {\n            text-align: center;\n            border-top: 1px dashed #ddd;\n            border-bottom: 1px dashed #ddd;\n            padding-top: 1px;\n            margin-top: 1px;\n            font-size: 18px;\n        }\n        .Tax_line {\n             border-bottom: 1px dashed #ddd;\n        }\n        \n    </style>\n   \n</head>\n<body>\n    <div class="invoice-container">\n        \x3c!-- Invoice Header --\x3e\n        <div class="invoice-header">\n            <img src="https://images.seeklogo.com/logo-png/33/1/adnoc-logo-png_seeklogo-332415.png?v=638623505950000000" alt="ADNOC Distribution" width="70"/>\n            <p style="font-size: 15px;" >**** Duplicate Copy ****</p>\n             <p>TAX INVOICE</p>\n             <p>TRN: 100069993200003</p>\n            <P>ADNOC Distribution</p>\n            <p>P.O Box 4188, Abu Dhabi UAE</p>\n            <p>Site: ${t}</p>\n        </div>\n\n        <table id="data-table" class="invoice-items">\n                        <thead>\n                            <tr>\n                                <th>Item</th>\n                                <th>Qty</th>\n                                <th>Price</th>\n                                <th>Total</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            ${M.map(t=>`\n                                    <tr>\n                                        <td>${t.Name}</td>\n                                        <td>${t.Qty}</td>\n                                        <td>${t.Price}</td>\n                                         <td>${t.Total}</td>\n                                    </tr>\n                                `).join("")}\n                            <tr class="total">\n                                <td colspan="3">Total</td>\n                                <td>${A}</td>\n                            </tr>\n                        </tbody>\n                    </table>\n          \n          <div class="invoice-details">\n            <P>Payment Mode</P>\n           <ul id="item-list">\n\x3c!-- List items will be added dynamically --\x3e\n\t\t\t                      ${o.map(t=>` <li>${t.MOP_TYPE}  :  ${t.AMOUNT}</li> `).join("")}\n            </ul>\n          </div>\n          \n\n            \n        \n         <div class="invoice-details">\n                <p><center>You could have earned Points! </br> Sign up for ADNOC Rewords Now!</center></p>\n                <center><img src="data:image/png;base64,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" alt="ADNOC Rewords" width="70"></center>\n                \n            </div> \n            \n            <div class="invoice-details">\n                <p style="font-size: 16px"><center>Price Inclusive of VAT </br> VAT Summary</center></p>\n              <table style="width:100%" class="invoice-items">\n                <tr>\n                  <td>VAT-Code</td>\n                  <td>Amount</td>\n                  <td>VAT-Rate</td>\n                  <td>VAT(AED)</td>\n                </tr>\n                <tr style="text-align: center">\n                  <td>C</td>\n                  <td>${A}</td>\n                  <td>5%</td>\n                  <td>${I}</td>\n                </tr>\n              </table>\n          </div>\n                \n        \n          <div class="invoice-details">\n            <div >\n                <p>Date: ${h} ${m}</p>\n                <p>Transcation No: ${l}</p>\n                <p>Invoice No: ${c}</p>\n                <p>RRN: 432611326923</p>\n                <p>Attender Id: 43261</p>\n                <p>Plate No/Code: ${r}/${d}</p>\n\t\t\t\t<p>Emirates: ${p}</p>\n            </div> \n          </div>  \n          \n            <div class="invoice-details">\n              </br>\n                <center><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAdVBMVEX///8AAADe3t7T09N2dnaPj4+bm5uGhoY7Oztvb2+9vb3AwMDPz8+urq7u7u7m5uYICAj4+PilpaUhISEmJiZbW1tra2uMjIyZmZmhoaFfX18+Pj5+fn5QUFBXV1fy8vK0tLQSEhIzMzMZGRk9PT1HR0c1NTWmaidBAAAGE0lEQVR4nO2d3VbqOhSFlT/5KxVEKG4U9Hh4/0c8FzZr6ulkjYSWIpv5XSZpko+9x+gyWUnv7oQQQghxS8w7DTC37kjljIyaW+25JgI69w0wte5I5ZaM+mS1VjRtYiIdMlYjhl3P8IGMOrRaK+o2MREZnowMZSjDaGR4Mldi+NpP5M0zfCpCsyIrWeRxhm+pE3mNNOyTWpeNZzi0oomVjeMMN6kT6Z/LcBBnOE41HKRORIYyPIoMS2RYIkOHyxgurQiGEyu7tOFi1DvKCO9jZjgxrCgfh6J+6GT7T5zhxpvIoobh6N5h5Rq6PJDuXMOVN5FRDcNeXMfnN3R/6p4MZShDGcpQhr/V8Mnhcb+bVbg6Q+/Jb3Ep4a8wHN85yFCGMpShDKMM/463xWMVaza+m5dcsSFhQjrJq82u2HBMOpGhDGUoQxlev2Gzq/rsfUhyTltd1d+sRkdZYXzXcD4t6Q7uq4y7odo1HHgTwRZRq7trRu79/N9wDSORoQyPIkMZyjAaGZ5syLIvjdnphmfLvnzbDJLYvBDDoihri0VJtrVm2yyULT3Dl9SJIJW3zSzoDytCXBqZMVSDNg1rZH3VQIYnI8MSGdZHhifz9xuSU7LMEO/DTyuzorOdkp1Pu7WZYi+JGM6s3frt+YuX96phwxM5G8QQuBlD14IMZfj7kaEMfz83ZLgkleuLGCJqW1sZ2z+0Sj+62lVTZtj+IekXcWlBpmmVT1bEdu38uLQRQxI2JRuy1USrxP+NdEN3D/jxwoaWWCVDGcpQhldsGLueQkZgM3H7Ze/DOobL4Rcf61n+xQxpLIeycvgnVOb4J1l+hsp3DJFX2H8M/88fZNXC0CaCA7426AyGNsusOpElMwR4ApAFGJBZ5QupNdj9NGQliuH2C/ZuJ76h5S7NSSV+6+dUQ7KayHCTs0DmdiJDGcpQhjI8t+HOal3D5PfhR5yhm0EL9jUMs8m4xIqG64eSTaic/AudAHJMYNgNnU2sGdPvWLMitMIKz3sYfg39rc1yR7rzDQlIr2bJv1aJjCFIwJrdvGuwTKQacWmyIctkBxbmIesLhlhNJJnsYGHNsC8pQxnKUIYyvC5DdioIWCV7H+K9Hfk+dA3ZClesYd9iBEJm4Ygb0zxY5cICEzTbRsU0Y/wQxDC30AfRTaxh5KlyNy5lGbQMd0qAGAI/CzrZEOul7t8WLCdKhjKUoQxleDOGke/DNg0RK8XuPW0Pld0i49CzZkXYVPq293S6oe09gaW/ioHNKtuj8r8VVOM8PiHdkFRGRt7+aqIMZShDGcqwSUM/N/HChlbUgiHWaQrfMOSZ1jIMnVgRyy+N3V1rBDJNthJFDBmruGat4hom53ljh7SFA02RyFCGP5HhJZChDH8yimvmc65zwO8v5ZnfN1zGAsPX5wCZkh0c7mCFy52lu5N1trPcn2QsGEburkWy8Hpr4Tw+M4zcIY0kNvKWoQxlKEMZXoNhZLbJ2Qwbua/NipbhbjaQ4V61olK5wOU1MNzaWI0YNvvF42ReiSHZe2rVMPnrDy6IUN2sLxnKUIYylOFNG+J96GbQNmNY4159u03f33ECdsE+UmHyUDTFIZ+GDZv4NkLyPcI+DRs28X2L5LugZShDGcpQhjdo2PD70O2jVcPw/cP7T7u4jcDvEQ6Psht4SB+Imto1DBzcUd2bkiO//tBqXlvkaqIMZShDGcpQhj8ND/PZceYHZvj0xXuxs3ZWW+1jt38sH7jfX8QwFjIlttbmTsTnSgxJ5N0jj8pQhjKUoQzbM6yxqt+sodtvnffhYtQ7yggJsczQ2vmXya2s3aQKLj0bWBmZCLJKO+OyFb2v7VzfsPRXopAx5DYD7kSQa/V7vtJpWV/sPkaGm8n+G79DKkMZylCGMiyp8cXjy7wPX/uJICEWhlaJUZ/32Rd7HPJ5CM3Y0eCVPYAL3taV0dd7G3Rats8WfkxTAzd+xBlxpkNAXOgGyOlxaQ1cQ//sGgGria5h+t8WNZChDH8iwxIZyjAJd39ha5VbUkvAt4Lc+/pXd3HMOw2AqJFUIkKbxfWGB3KvmXs6TAghhBA3wX8YDt0U5PM9ZwAAAABJRU5ErkJggg==" alt="ADNOC Rewords" width="70">\n                  </center>   \n                  <center><p>Claim Rewards QR</p></center>\n            </div> \n            \n        \x3c!-- Invoice Footer --\x3e\n                 <center>\n                   <p>Thank You </br> Contact Us: 800300 </br> www.adnocdistribution.com</p>\n                 </center>\n                \n            \n    </div>\n</body>\n</html>`;const N=new Blob([x],{type:"text/html"});const R=URL.createObjectURL(N);const f=window.open(R,"_blank");if(f){f.onload=function(){f.print();URL.revokeObjectURL(R)}}else{sap.m.MessageToast.show("Unable to open the print window. Please check your browser settings.")}}})});
//# sourceMappingURL=PaymentDetails.controller.js.map